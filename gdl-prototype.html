<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Data Link - UI Prototype</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple SVG icon components
        const Camera = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
            <circle cx="12" cy="13" r="4"/>
          </svg>
        );

        const CheckCircle = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        );

        const MapPin = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
        );

        const Cloud = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
          </svg>
        );

        const FileText = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
        );

        const Share2 = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <circle cx="18" cy="5" r="3"/>
            <circle cx="6" cy="12" r="3"/>
            <circle cx="18" cy="19" r="3"/>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
          </svg>
        );

        const ArrowRight = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12 5 19 12 12 19"/>
          </svg>
        );

        const X = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        );

        const Check = ({ size = 24, className = "" }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
            <polyline points="20 6 9 17 4 12"/>
          </svg>
        );

        const GDLPrototype = () => {
          const [currentScreen, setCurrentScreen] = useState('home');
          const [scanProgress, setScanProgress] = useState(0);
          const [selectedHoles, setSelectedHoles] = useState([]);

          const scoreData = Array.from({ length: 18 }, (_, i) => ({
            hole: i + 1,
            par: [4, 4, 3, 5, 4, 4, 3, 5, 4, 4, 5, 3, 4, 4, 3, 5, 4, 4][i],
            score: [5, 4, 3, 6, 5, 4, 2, 5, 4, 5, 6, 3, 4, 5, 3, 6, 4, 5][i],
            putt: [2, 2, 1, 2, 2, 2, 1, 2, 2, 2, 3, 2, 2, 2, 1, 2, 2, 2][i],
            confidence: [0.95, 0.88, 0.92, 0.76, 0.89, 0.94, 0.91, 0.85, 0.90, 0.73, 0.88, 0.95, 0.92, 0.79, 0.94, 0.82, 0.91, 0.87][i]
          }));

          const HomeScreen = () => (
            <div className="flex flex-col h-full bg-gradient-to-b from-green-50 to-white">
              <div className="p-6">
                <h1 className="text-3xl font-bold text-green-900 mb-2">Golf Data Link</h1>
                <p className="text-gray-600">あなたのゴルフデータをデジタル資産に</p>
              </div>
              
              <div className="flex-1 flex flex-col items-center justify-center px-6">
                <div className="w-48 h-48 bg-green-100 rounded-full flex items-center justify-center mb-8 shadow-lg">
                  <Camera size={80} className="text-green-600" />
                </div>
                
                <button
                  onClick={() => setCurrentScreen('camera')}
                  className="w-full max-w-sm bg-green-600 text-white py-4 rounded-xl font-semibold text-lg shadow-lg hover:bg-green-700 transition-all mb-4"
                >
                  スコアカードをスキャン
                </button>
                
                <button
                  onClick={() => setCurrentScreen('scorebook')}
                  className="w-full max-w-sm bg-white text-green-600 py-4 rounded-xl font-semibold border-2 border-green-600 hover:bg-green-50 transition-all"
                >
                  スコアブックを見る
                </button>
              </div>
              
              <div className="p-6 grid grid-cols-3 gap-4">
                <div className="text-center">
                  <div className="text-2xl font-bold text-green-600">127</div>
                  <div className="text-xs text-gray-600">ラウンド数</div>
                </div>
                <div className="text-center">
                  <div className="text-2xl font-bold text-green-600">84.2</div>
                  <div className="text-xs text-gray-600">平均スコア</div>
                </div>
                <div className="text-center">
                  <div className="text-2xl font-bold text-green-600">5</div>
                  <div className="text-xs text-gray-600">ベストスコア</div>
                </div>
              </div>
            </div>
          );

          const CameraScreen = () => (
            <div className="flex flex-col h-full bg-black">
              <div className="p-4 flex items-center justify-between">
                <button onClick={() => setCurrentScreen('home')} className="text-white">
                  <X size={24} />
                </button>
                <div className="text-white text-sm">カメラ</div>
                <div className="w-6"></div>
              </div>
              
              <div className="flex-1 relative flex items-center justify-center">
                <div className="w-full h-full bg-gradient-to-b from-gray-800 to-gray-900 relative">
                  <div className="absolute inset-0 flex items-center justify-center">
                    <div className="w-80 h-96 border-4 border-green-400 rounded-lg relative animate-pulse">
                      <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-green-400 text-black px-4 py-2 rounded-full text-sm font-semibold">
                        スコアカードを検出中...
                      </div>
                      <div className="absolute top-4 left-4 w-8 h-8 border-t-4 border-l-4 border-green-400"></div>
                      <div className="absolute top-4 right-4 w-8 h-8 border-t-4 border-r-4 border-green-400"></div>
                      <div className="absolute bottom-4 left-4 w-8 h-8 border-b-4 border-l-4 border-green-400"></div>
                      <div className="absolute bottom-4 right-4 w-8 h-8 border-b-4 border-r-4 border-green-400"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div className="p-6">
                <button
                  onClick={() => {
                    setCurrentScreen('processing');
                    setTimeout(() => setCurrentScreen('verify'), 2000);
                  }}
                  className="w-full bg-green-500 text-white py-4 rounded-full font-semibold text-lg shadow-lg"
                >
                  撮影
                </button>
                <p className="text-center text-white text-sm mt-4 opacity-75">
                  スコアカードを画面中央に配置してください
                </p>
              </div>
            </div>
          );

          const ProcessingScreen = () => {
            useEffect(() => {
              const interval = setInterval(() => {
                setScanProgress(prev => {
                  if (prev >= 100) return 100;
                  return prev + 10;
                });
              }, 200);
              return () => clearInterval(interval);
            }, []);

            return (
              <div className="flex flex-col h-full bg-white items-center justify-center p-6">
                <div className="w-24 h-24 border-4 border-green-500 border-t-transparent rounded-full animate-spin mb-8"></div>
                <h2 className="text-2xl font-bold text-gray-800 mb-4">スキャン中...</h2>
                <div className="w-full max-w-sm">
                  <div className="bg-gray-200 rounded-full h-2 mb-4">
                    <div 
                      className="bg-green-500 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${scanProgress}%` }}
                    ></div>
                  </div>
                  <div className="space-y-2 text-sm text-gray-600">
                    <div className="flex items-center">
                      <CheckCircle size={16} className="text-green-500 mr-2" />
                      画像補正完了
                    </div>
                    <div className="flex items-center">
                      <CheckCircle size={16} className="text-green-500 mr-2" />
                      グリッド解析完了
                    </div>
                    <div className="flex items-center animate-pulse">
                      <div className="w-4 h-4 border-2 border-green-500 border-t-transparent rounded-full animate-spin mr-2"></div>
                      手書き文字を認識中...
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          const VerifyScreen = () => {
            const totalScore = scoreData.reduce((sum, hole) => sum + hole.score, 0);
            const lowConfidenceHoles = scoreData.filter(h => h.confidence < 0.8);

            return (
              <div className="flex flex-col h-full bg-white">
                <div className="p-4 bg-green-600 text-white">
                  <div className="flex items-center justify-between mb-2">
                    <button onClick={() => setCurrentScreen('home')} className="text-white">
                      <X size={24} />
                    </button>
                    <h2 className="text-lg font-semibold">スコア確認</h2>
                    <div className="w-6"></div>
                  </div>
                  <div className="flex items-center justify-between bg-white/20 rounded-lg p-3">
                    <div>
                      <div className="text-2xl font-bold">{totalScore}</div>
                      <div className="text-xs opacity-90">Total Score</div>
                    </div>
                    <div className="text-right">
                      <div className="text-sm">{lowConfidenceHoles.length}ホール要確認</div>
                      <div className="text-xs opacity-90">黄色のセルをタップして修正</div>
                    </div>
                  </div>
                </div>

                <div className="flex-1 overflow-y-auto p-4">
                  <div className="grid grid-cols-3 gap-2">
                    {scoreData.map((hole) => (
                      <div
                        key={hole.hole}
                        onClick={() => {
                          if (hole.confidence < 0.8) {
                            setSelectedHoles([...selectedHoles, hole.hole]);
                          }
                        }}
                        className={`p-3 rounded-lg border-2 transition-all cursor-pointer ${
                          selectedHoles.includes(hole.hole)
                            ? 'border-green-500 bg-green-50'
                            : hole.confidence < 0.8
                            ? 'border-yellow-400 bg-yellow-50'
                            : 'border-gray-200 bg-white'
                        }`}
                      >
                        <div className="text-xs text-gray-600 mb-1">Hole {hole.hole}</div>
                        <div className="flex items-center justify-between">
                          <div>
                            <div className="text-2xl font-bold">{hole.score}</div>
                            <div className="text-xs text-gray-500">Par {hole.par}</div>
                          </div>
                          <div className="text-right">
                            <div className="text-lg font-semibold text-green-600">{hole.putt}</div>
                            <div className="text-xs text-gray-500">Putt</div>
                          </div>
                        </div>
                        {selectedHoles.includes(hole.hole) && (
                          <div className="mt-2 flex items-center text-xs text-green-600">
                            <Check size={14} className="mr-1" />
                            確認済み
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>

                <div className="p-4 border-t">
                  <button
                    onClick={() => setCurrentScreen('enrichment')}
                    className="w-full bg-green-600 text-white py-4 rounded-xl font-semibold text-lg shadow-lg flex items-center justify-center"
                  >
                    次へ進む
                    <ArrowRight size={20} className="ml-2" />
                  </button>
                </div>
              </div>
            );
          };

          const EnrichmentScreen = () => {
            return (
              <div className="flex flex-col h-full bg-white">
                <div className="p-4 bg-gradient-to-r from-green-600 to-green-500 text-white">
                  <h2 className="text-xl font-bold mb-2">プレー情報を補完</h2>
                  <p className="text-sm opacity-90">GPSと気象データで自動記録</p>
                </div>

                <div className="flex-1 overflow-y-auto p-4 space-y-4">
                  <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                    <div className="flex items-center mb-3">
                      <MapPin className="text-blue-600 mr-2" size={20} />
                      <h3 className="font-semibold text-gray-800">ゴルフ場情報</h3>
                    </div>
                    <div className="space-y-2">
                      <div className="bg-white rounded-lg p-3">
                        <div className="text-sm text-gray-600">コース名</div>
                        <div className="text-lg font-semibold">富士カントリークラブ</div>
                      </div>
                      <div className="grid grid-cols-2 gap-2">
                        <div className="bg-white rounded-lg p-3">
                          <div className="text-xs text-gray-600">ティー</div>
                          <div className="font-semibold">Regular</div>
                        </div>
                        <div className="bg-white rounded-lg p-3">
                          <div className="text-xs text-gray-600">Total Par</div>
                          <div className="font-semibold">72</div>
                        </div>
                      </div>
                    </div>
                    <div className="mt-3 flex items-center text-xs text-green-600">
                      <CheckCircle size={14} className="mr-1" />
                      GPS位置情報から自動検出
                    </div>
                  </div>

                  <div className="bg-orange-50 border-2 border-orange-200 rounded-xl p-4">
                    <div className="flex items-center mb-3">
                      <Cloud className="text-orange-600 mr-2" size={20} />
                      <h3 className="font-semibold text-gray-800">気象データ</h3>
                    </div>
                    <div className="grid grid-cols-3 gap-2">
                      <div className="bg-white rounded-lg p-3 text-center">
                        <div className="text-2xl mb-1">☀️</div>
                        <div className="text-xs text-gray-600">晴れ</div>
                      </div>
                      <div className="bg-white rounded-lg p-3 text-center">
                        <div className="text-xl font-semibold mb-1">22°C</div>
                        <div className="text-xs text-gray-600">気温</div>
                      </div>
                      <div className="bg-white rounded-lg p-3 text-center">
                        <div className="text-xl font-semibold mb-1">3.5m/s</div>
                        <div className="text-xs text-gray-600">風速</div>
                      </div>
                    </div>
                    <div className="mt-3 flex items-center text-xs text-green-600">
                      <CheckCircle size={14} className="mr-1" />
                      プレー日時から自動取得
                    </div>
                  </div>

                  <div className="bg-purple-50 border-2 border-purple-200 rounded-xl p-4">
                    <div className="flex items-center mb-3">
                      <FileText className="text-purple-600 mr-2" size={20} />
                      <h3 className="font-semibold text-gray-800">スタッツ推計</h3>
                    </div>
                    <div className="grid grid-cols-2 gap-2">
                      <div className="bg-white rounded-lg p-3">
                        <div className="text-xs text-gray-600">パーオン</div>
                        <div className="text-xl font-semibold">8 / 18</div>
                      </div>
                      <div className="bg-white rounded-lg p-3">
                        <div className="text-xs text-gray-600">FWキープ率</div>
                        <div className="text-xl font-semibold">64%</div>
                      </div>
                      <div className="bg-white rounded-lg p-3">
                        <div className="text-xs text-gray-600">平均パット</div>
                        <div className="text-xl font-semibold">1.83</div>
                      </div>
                      <div className="bg-white rounded-lg p-3">
                        <div className="text-xs text-gray-600">ボギーオン</div>
                        <div className="text-xl font-semibold">14 / 18</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="p-4 border-t">
                  <button
                    onClick={() => setCurrentScreen('success')}
                    className="w-full bg-green-600 text-white py-4 rounded-xl font-semibold text-lg shadow-lg"
                  >
                    保存して完了
                  </button>
                </div>
              </div>
            );
          };

          const SuccessScreen = () => {
            return (
              <div className="flex flex-col h-full bg-gradient-to-b from-green-50 to-white items-center justify-center p-6">
                <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mb-6 shadow-lg">
                  <CheckCircle size={60} className="text-white" />
                </div>
                <h2 className="text-2xl font-bold text-gray-800 mb-2">保存完了!</h2>
                <p className="text-gray-600 text-center mb-8">
                  スコアがデジタルスコアブックに追加されました
                </p>

                <div className="w-full max-w-sm space-y-3">
                  <button
                    onClick={() => setCurrentScreen('scorebook')}
                    className="w-full bg-green-600 text-white py-4 rounded-xl font-semibold flex items-center justify-center"
                  >
                    <FileText size={20} className="mr-2" />
                    スコアブックを見る
                  </button>
                  <button
                    onClick={() => setCurrentScreen('home')}
                    className="w-full bg-white text-green-600 py-4 rounded-xl font-semibold border-2 border-green-600"
                  >
                    ホームに戻る
                  </button>
                  <button className="w-full bg-blue-500 text-white py-4 rounded-xl font-semibold flex items-center justify-center">
                    <Share2 size={20} className="mr-2" />
                    他のアプリに連携
                  </button>
                </div>
              </div>
            );
          };

          const ScorebookScreen = () => {
            const rounds = [
              { date: '2026-01-12', course: '富士カントリークラブ', score: 82 },
              { date: '2026-01-05', course: '箱根湖畔ゴルフコース', score: 87 },
              { date: '2025-12-28', course: '富士カントリークラブ', score: 85 },
            ];

            return (
              <div className="flex flex-col h-full bg-white">
                <div className="p-4 bg-green-600 text-white">
                  <div className="flex items-center justify-between">
                    <button onClick={() => setCurrentScreen('home')}>
                      <X size={24} />
                    </button>
                    <h2 className="text-xl font-bold">スコアブック</h2>
                    <div className="w-6"></div>
                  </div>
                </div>

                <div className="flex-1 overflow-y-auto p-4">
                  <div className="space-y-3">
                    {rounds.map((round, idx) => (
                      <div key={idx} className="bg-white border-2 border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow">
                        <div className="flex items-center justify-between mb-2">
                          <div className="text-sm text-gray-600">{round.date}</div>
                          <div className="text-2xl font-bold text-green-600">{round.score}</div>
                        </div>
                        <div className="font-semibold text-gray-800">{round.course}</div>
                        <div className="mt-3 flex gap-2">
                          <button className="flex-1 bg-green-50 text-green-600 py-2 rounded-lg text-sm font-semibold">
                            詳細を見る
                          </button>
                          <button className="px-4 bg-gray-100 text-gray-600 py-2 rounded-lg text-sm">
                            <Share2 size={16} />
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            );
          };

          return (
            <div className="w-full h-screen bg-gray-100 flex items-center justify-center">
              <div className="w-full max-w-sm h-full bg-white shadow-2xl overflow-hidden">
                {currentScreen === 'home' && <HomeScreen />}
                {currentScreen === 'camera' && <CameraScreen />}
                {currentScreen === 'processing' && <ProcessingScreen />}
                {currentScreen === 'verify' && <VerifyScreen />}
                {currentScreen === 'enrichment' && <EnrichmentScreen />}
                {currentScreen === 'success' && <SuccessScreen />}
                {currentScreen === 'scorebook' && <ScorebookScreen />}
              </div>
            </div>
          );
        };

        ReactDOM.render(<GDLPrototype />, document.getElementById('root'));
    </script>
</body>
</html>